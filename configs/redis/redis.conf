# 基础设置
bind 0.0.0.0              # 绑定所有接口，容器环境必需
protected-mode no         # 关闭保护模式，容器环境通常需要
port 6379                 # 监听端口
timeout 0                 # 客户端超时时间

# 持久化设置
save 900 1                # 900秒内至少1个key被修改则进行快照
save 300 10               # 300秒内至少10个key被修改则进行快照
save 60 10000             # 60秒内至少10000个key被修改则进行快照
appendonly yes            # 启用AOF持久化
appendfsync everysec      # AOF同步策略，每秒一次

# 内存管理
maxmemory 256mb               # 最大内存限制
maxmemory-policy allkeys-lru  # 内存不足时的淘汰策略

# 安全设置
requirepass \$REDIS_PASSWORD  # 设置访问密码
rename-command FLUSHALL ""    # 禁用危险命令
rename-command FLUSHDB ""     # 禁用危险命令

# 日志设置
loglevel notice             # 日志级别
logfile /var/log/redis.log  # 日志文件位置